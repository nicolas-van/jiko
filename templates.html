
{% module %}

{% function name="niceTemplate" %}
    % var cons = "consectetur";
    <div>
        <h1>Welcome to this empty site.</h1>
        <p>
            Lorem ipsum <a href="http://google.com">dolor sit amet</a>, ${cons} <em>adipisicing</em> elit, sed do
            <strong>eiusmod</strong> tempor incididunt ut labore et dolore magna aliqua.
        </p>
        <blockquote><p>
            This is a citation. Duis aute irure dolor in reprehenderit in voluptate velit esse
            cillum dolore eu fugiat nulla pariatur.
        </p></blockquote>
        <h2>Welcome to this empty site.</h2>
        <p>
            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut
            labore et dolore magna aliqua.
        </p>
    </div>
{% end %}
{% function name="yop" %}
    Hello
{% end %}
{% function name="test" %}
    ${a.testVar}
{% end %}
{% function name="test2" %}
    <% _.each(a.lst, function(el) { %>
    ${el}
    <% }
    ); %>
{% end %}
{% function name="test3" %}
    % _.each(a.lst, function(el) { 
    ${el}
    % }); 
{% end %}
{% function name="testfct" %}
    % var yop = function(arg) {
    ${arg}
    % }; 
    <% yop("abc"); %>
    % yop("def");
{% end %}
{% function name="testmacro" %}
    lalala
{% end %}
{% function name="testescaping" %}
    % var x = "<div></div>";
    ${x}
{% end %}
{% function name="testnoescaping" %}
    % var x = "<div></div>";
    %{x}
{% end %}
{% function name="testThis" %}
    ${this.str}
{% end %}
{% function name='testDef' %}
    {% function name="test" %}
        Test
    {% end %}
    %{test()}
{% end %}
{% function name="testFunctional" %}
    % var x = "Test";
    {% function name="test" %}
        ${ x }
    {% end %}
    %{ testFunctional2({test: test}) }
{% end %}
{% function name="testFunctional2" %}
    <div>
        %{ a.test() }
    </div>
{% end %}
## this is a comment
{% function name="testComment" %}
    ## this is another comment
    Test
{% end %}
{% function name="testMultiComment" %}
    {* This is 
    a multi line comment *}
    Test
{% end %}
{% function name="printtest" %}
    % o += "Test"
{% end %}
{% function name="singleLinePreviousSpace" %}
    abc
    % o += "def"
{% end %}
{% function name="multiSingleLine" %}
    % if (true
    %     === true) {
        Test
    % }
{% end %}
