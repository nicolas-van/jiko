
<!DOCTYPE html>

<html class="progdesign">
<head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Jiko - Syntax Guide</title>
    <meta name="description" content="Jiko - Syntax Guide">
    <meta name="author" content="Nicolas Vanhoren">

    
    <link rel="shortcut icon" href="../static/img/favicon.ico">

    
    <link rel="stylesheet" type="text/css" href="../common/static/css/base_style.css" />
    
    
    <link rel="stylesheet" type="text/css" href="../static/css/style.css" />
    <script type="text/javascript" src="../static/libs/underscore/underscore.js"></script>
    <script type="text/javascript" src="../static/libs/jiko/jiko.js"></script>

</head>
<body>

    
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-33415030-7', 'neoname.eu');
      ga('send', 'pageview');

    </script>
    <a href="https://github.com/nicolas-van/jiko"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png" alt="Fork me on GitHub"></a>


    <div class="wrap">

        <div class="container ">

            <div class="row">
                <div class="leftAreaCell col-md-3">
                    

<div class="sidePageHeader">
    <div class="sidePageHeader sideBlock">
        <a href="../"><img src="../static/img/horse_150.png"></img></a>
        <div>
            <h1>Jiko</h1>
            <h2>Full Featured Template Engine for JavaScript</h2>
        </div>
    </div>
    <div class="verticalSocialNetwork">
        
    <a href="https://twitter.com/share" class="twitter-share-button" data-url="http://jiko.neoname.eu" data-text="Jiko - Full Featured Template Engine for JavaScript" data-via="nicolasvanhoren" data-lang="fr">Tweeter</a>
    <a href="https://twitter.com/nicolasvanhoren" class="twitter-follow-button" data-show-count="false" data-show-screen-name="false">Follow @nicolasvanhoren</a>
    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
    <iframe src="http://ghbtns.com/github-btn.html?user=nicolas-van&repo=jiko&type=watch&count=true" allowtransparency="true" frameborder="0" scrolling="0" width="110" height="20"></iframe>

    </div>
    <div class="sideNavigation sideBlock">
        <h3>Navigation</h3>
        
    <a href="../">home</a>
    <a href="../releases.html">download</a>
    <a href="../docs/docs.html">documentation</a>

    </div>
    <div class="usefulLinks sideBlock">
        <h3>Useful Links</h3>
        
    <a href="https://github.com/nicolas-van/jiko/issues">Bug tracker</a>
    <a href="https://github.com/nicolas-van/jiko">Jiko @ Github</a>
    
    <a href="https://github.com/nicolas-van">Author's projects</a>
    <a href="http://butterflyprogramming.neoname.eu/">Author's blog</a>
    <a href="https://twitter.com/nicolasvanhoren">Author's twitter</a>


    </div>
</div>


                </div>
                <div class="rightAreaCell col-md-9">
                    
                    
                    
<h1 id="syntax-guide">Syntax Guide</h1>
<p>Before explaining the syntax of Jiko in details, it's important to notice that all Jiko templates are compiled to
JavaScript code. Every syntax element has an equivalent in JavaScript and understanding the resulting code can be
useful.</p>
<p>To ease debugging, Jiko was created to generate a JavaScript code as clean as possible. So you are invited to take a
look at that generated code to precisely understand how Jiko works.</p>
<h2 id="expression-escaping">Expression Escaping</h2>
<p>The most basic task of a template engine is probably to output the result of an expression. Jiko uses the <code>${}</code> syntax:</p>
<div class="codehilite"><pre>The current time is <span class="cp">${</span><span class="n">new</span> <span class="n">Date</span><span class="p">()</span><span class="o">.</span><span class="n">toString</span><span class="p">()</span><span class="cp">}</span>.
</pre></div>


<p>Expressions inside <code>${}</code> must simply be any kind of valid JavaScript expression.</p>
<p>Every time the <code>${}</code> construct is used, <code>escapeFunction()</code> will be called with the result of the expression evaluation.
<code>escapeFunction()</code> is a function defined in all Jiko compiled templates. Its default behavior is to escape HTML. So all
expressions given to <code>${}</code> will be escaped.</p>
<p>Please note that you could redefine <code>escapeFunction()</code> to use another escaping mechanism if you don't intend to output
HTML.</p>
<h2 id="expression-substitution">Expression Substitution</h2>
<p>If you know that the variable you want to output is some valid HTML and you don't want to escape it you should use the
<code>%{}</code> construct:</p>
<div class="codehilite"><pre><span class="nt">&lt;div&gt;</span>I like to put some %{&quot;<span class="nt">&lt;em&gt;</span>emphasis<span class="nt">&lt;/em&gt;</span>&quot;} some times.<span class="nt">&lt;/div&gt;</span>
</pre></div>


<p>Expressions given to <code>%{}</code> are not processed through <code>escapeFunction()</code> like with <code>${}</code>.</p>
<h2 id="javascript-blocks">JavaScript Blocks</h2>
<p>To put one or multiple lines of JavaScript in the generated code, use the <code>&lt;% %&gt;</code> construct:</p>
<div class="codehilite"><pre><span class="cp">&lt;%</span>
    <span class="n">var</span> <span class="n">now</span> <span class="o">=</span> <span class="n">new</span> <span class="n">Date</span><span class="p">();</span>
    <span class="n">var</span> <span class="n">tomorrow</span> <span class="o">=</span> <span class="n">new</span> <span class="n">Date</span><span class="p">(</span><span class="n">now</span><span class="o">.</span><span class="n">getTime</span><span class="p">()</span> <span class="o">+</span> <span class="p">(</span><span class="mi">24</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">));</span>
<span class="cp">%&gt;</span>
<span class="nt">&lt;div&gt;</span>Let&#39;s meet tomorrow at this time: <span class="cp">${</span><span class="n">tomorrow</span><span class="o">.</span><span class="n">toString</span><span class="p">()</span><span class="cp">}</span>.<span class="nt">&lt;/div&gt;</span>
</pre></div>


<p>Inside a JavaScript block, you are free to use the <code>o</code> variable which contains the text currentlry rendered to output
some more text in the current template. When doing so, don't forget to escape the outputed text. Just in case, <code>o</code>
stands for <em>output</em>.</p>
<div class="codehilite"><pre><span class="nt">&lt;ul&gt;</span>
    <span class="cp">&lt;%</span>
        <span class="p">[</span><span class="s">&quot;apple&quot;</span><span class="p">,</span> <span class="s">&quot;banana&quot;</span><span class="p">,</span> <span class="s">&quot;pie&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">forEach</span><span class="p">(</span><span class="n">function</span><span class="p">(</span><span class="n">el</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">o</span> <span class="o">+</span> <span class="s">&quot;&lt;li&gt;&quot;</span> <span class="o">+</span> <span class="n">escapeFunction</span><span class="p">(</span><span class="n">el</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;&lt;/li&gt;&quot;</span><span class="p">;</span>
        <span class="p">});</span>
    <span class="cp">%&gt;</span>
<span class="nt">&lt;/ul&gt;</span>
</pre></div>


<h2 id="single-line-of-javascript">Single Line of JavaScript</h2>
<p>JavaScript blocks are useful but the syntax is not so nice anymore when you want a single line of JavaScript. This is
often the case when you use control structures. For these use cases, Jiko also has another construct: the single line
<code>%</code>.</p>
<div class="codehilite"><pre><span class="cp">%</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span><span class="o">.</span><span class="n">forEach</span><span class="p">(</span><span class="n">function</span><span class="p">(</span><span class="n">el</span><span class="p">)</span> <span class="p">{</span>
    <span class="nt">&lt;p&gt;</span><span class="cp">${</span><span class="n">el</span><span class="cp">}</span><span class="nt">&lt;/p&gt;</span>
<span class="cp">%</span> <span class="p">});</span>
</pre></div>


<p>Lines beginning with the <code>%</code> character will be considered as JavaScript until the end of the line.</p>
<p>This syntax allows a cleaner code in some cases. You should learn both the JavaScript blocks construct and the single
line construct and switch between those two syntaxes according to the situation.</p>
<h2 id="template-parameters">Template Parameters</h2>
<p>Usually templates are used to render a view according to existing data. To give parameters to a template function you
must give it a dictionary as first parameter. That dictionary will be available in the template as the <code>a</code> variable. In
this case, <code>a</code> stands for <em>arguments</em>.</p>
<div class="codehilite"><pre><span class="kd">var</span> <span class="nx">mytemplate</span><span class="o">=</span> <span class="nx">jiko</span><span class="p">.</span><span class="nx">loadFile</span><span class="p">(</span><span class="s2">&quot;mytemplate.html&quot;</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">mytemplates</span><span class="p">({</span><span class="nx">customers</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;Harrold&quot;</span><span class="p">,</span> <span class="s2">&quot;Richard&quot;</span><span class="p">,</span> <span class="s2">&quot;Bill&quot;</span><span class="p">]}));</span>
</pre></div>


<p>The <code>mytemplate.html</code> file:</p>
<div class="codehilite"><pre><span class="nt">&lt;p&gt;</span>Customers:<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;ul&gt;</span>
<span class="cp">%</span> <span class="n">a</span><span class="o">.</span><span class="n">customers</span><span class="o">.</span><span class="n">forEach</span><span class="p">(</span><span class="n">function</span><span class="p">(</span><span class="n">el</span><span class="p">)</span> <span class="p">{</span>
    <span class="nt">&lt;li&gt;</span><span class="cp">${</span><span class="n">el</span><span class="cp">}</span><span class="nt">&lt;/li&gt;</span>
<span class="cp">%</span> <span class="p">});</span>
<span class="nt">&lt;/ul&gt;</span>
</pre></div>


<h2 id="functions">Functions</h2>
<p>The <code>{% function %}</code> construct was already demonstrated in the <a href="../docs/tutorial.html#multiple-templates-
in-a-file">tutorial</a>. There we explained it allows to put multiple template functions in a single file.</p>
<p>What was not explained is that you can actually define <code>{% function %}</code> constructs anywhere in Jiko. They will be
translated to real JavaScript functions that can be called like any other template functions:</p>
<div class="codehilite"><pre>{% function name=&quot;renderDate&quot; %}
    <span class="nt">&lt;strong&gt;</span><span class="cp">${</span><span class="n">a</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">getMonth</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span><span class="cp">}</span>-<span class="cp">${</span><span class="n">a</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">getDay</span><span class="p">()</span><span class="cp">}</span><span class="nt">&lt;/strong&gt;</span>
{% end %}

<span class="nt">&lt;p&gt;</span>Today: %{renderDate({date: new Date()})}<span class="nt">&lt;/p&gt;</span>
</pre></div>


<p><code>{% function %}</code> constructs must have a <code>name</code> parameter specifying the name of the template function. They end with a
<code>{% end %}</code> construct. Here we use the <code>%{}</code> construct instead of <code>${}</code> because when we call the <code>renderDate</code> template
it already returns valid HTML, so we don't have to escape it.</p>
<h2 id="modules">Modules</h2>
<p>The module is a facility to define multiple templates in a single file. To indicate a file is in fact a module we put
a <code>{% module %}</code> construct at the beginning of the file.</p>
<div class="codehilite"><pre>{% module %}

{% function name=&quot;renderCustomer&quot; %}
    <span class="nt">&lt;p&gt;</span><span class="cp">${</span><span class="n">a</span><span class="o">.</span><span class="n">customer</span><span class="o">.</span><span class="n">name</span><span class="cp">}</span><span class="nt">&lt;/p&gt;</span>
    <span class="nt">&lt;p&gt;</span><span class="cp">${</span><span class="n">a</span><span class="o">.</span><span class="n">customer</span><span class="o">.</span><span class="n">account</span><span class="cp">}</span><span class="nt">&lt;/p&gt;</span>
{% end %}

<span class="cp">&lt;%</span>
    <span class="n">var</span> <span class="n">precision</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
<span class="cp">%&gt;</span>

{% function name=&quot;renderBill&quot; %}
    <span class="cp">%</span><span class="p">{</span><span class="n">renderCustomer</span><span class="p">({</span><span class="n">customer</span><span class="p">:</span> <span class="n">a</span><span class="o">.</span><span class="n">customer</span><span class="p">})}</span>
    <span class="nt">&lt;p&gt;</span><span class="cp">${</span><span class="n">a</span><span class="o">.</span><span class="n">product</span><span class="o">.</span><span class="n">name</span><span class="cp">}</span><span class="nt">&lt;/p&gt;</span>
    <span class="nt">&lt;p&gt;</span><span class="cp">${</span><span class="n">a</span><span class="o">.</span><span class="n">product</span><span class="o">.</span><span class="n">price</span><span class="o">.</span><span class="n">toFixed</span><span class="p">(</span><span class="n">precision</span><span class="p">)</span><span class="cp">}</span>$<span class="nt">&lt;/p&gt;</span>
{% end %}
</pre></div>


<p>The <code>renderBill</code> template could be called using this JavaScript code:</p>
<div class="codehilite"><pre><span class="nx">mymodule</span><span class="p">.</span><span class="nx">renderBill</span><span class="p">({</span><span class="nx">customer</span><span class="o">:</span> <span class="p">{</span><span class="nx">name</span><span class="o">:</span> <span class="s2">&quot;Albert&quot;</span><span class="p">,</span> <span class="nx">account</span><span class="o">:</span> <span class="s2">&quot;123&quot;</span><span class="p">},</span> <span class="nx">product</span><span class="o">:</span> <span class="p">{</span><span class="nx">name</span><span class="o">:</span> <span class="s2">&quot;Keyboard&quot;</span><span class="p">,</span> <span class="nx">price</span><span class="o">:</span> <span class="mf">8.9</span><span class="p">}});</span>
</pre></div>


<p>Once a Jiko file beginning with <code>{% module %}</code> is compiled using <code>jiko.loadFile()</code> or using the server-side
precompiler, it will result in a dictionary instead of a function. That dictionary will contain every functions
defined in the module.</p>
<p>Please note that all functions defined in a module, as well as any JavaScript variable declared, are all located in
the same scope. So it's possible for functions to call each others or to use variables defined outside a function like
in the above example.</p>
<h2 id="comments">Comments</h2>
<p>There are two notations to mark comments in Jiko: single-line and multi-lines.</p>
<div class="codehilite"><pre><span class="cp">## This is a single-line comment</span>
This is some text
{* This is 
a multi-line comment *}
</pre></div>


<p>Comments using the Jiko notation will not be outputted at all in the compiled JavaScript.</p>
<h2 id="escaping-jiko-constructs">Escaping Jiko Constructs</h2>
<p>If, for one reason or another, you really need to output a text like <code>${exp}</code> in your HTML code you'll have a problem
because Jiko will try to interpret it. To solve this problem Jiko supports escaping of any construct using <code>\</code>:</p>
<div class="codehilite"><pre>\<span class="cp">${</span><span class="n">this</span> <span class="n">will</span> <span class="n">directly</span> <span class="n">appear</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">HTML</span><span class="cp">}</span>
</pre></div>


<p>The <code>\</code> can itself be escaped by doubling it, etc...</p>

                </div>
            </div>

        </div>

    </div>

    <footer class="footerRow">
        Copyright © 2013 <a href="https://github.com/nicolas-van">Nicolas Vanhoren</a><br />
        All Rights Reserved
    </footer>

    
    

    <!--[if lt IE 8]>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/chrome-frame/1/CFInstall.min.js"></script>
    <script>
        // You may want to place these lines inside an onload handler
        CFInstall.check({
        mode: "overlay"
        });
    </script>
    <![endif]-->
</body>
</html>
